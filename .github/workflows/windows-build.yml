name: ZEngine Window Build

on:
  workflow_call:
    inputs:
      version_file:
        type: string
        default: '1'
jobs:
  cmake-build:
    strategy:
      matrix:
        buildConfiguration: [Debug, Release]
    uses: .github/workflows/templates/job-cmakebuild-windows.yml@v${{inputs.version_file}}
    with:
      configuration: ${{matrix.buildConfiguration}}

  test:
    needs: cmake-build
    strategy:
      matrix:
        testConfiguration: [Debug, Release]
    uses: .github/workflows/templates/job-test-windows.yml@v${{inputs.version_file}}
    with:
      configuration: ${{matrix.testConfiguration}}

  deploy:
    needs: test
    uses: .github/workflows/templates/job-deploy-windows.yml@v${{inputs.version_file}}